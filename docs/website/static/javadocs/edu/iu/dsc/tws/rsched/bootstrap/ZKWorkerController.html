<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>ZKWorkerController</title>
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ZKWorkerController";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKUtil.html" title="class in edu.iu.dsc.tws.rsched.bootstrap"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html" target="_top">Frames</a></li>
<li><a href="ZKWorkerController.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">edu.iu.dsc.tws.rsched.bootstrap</div>
<h2 title="Class ZKWorkerController" class="title">Class ZKWorkerController</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>edu.iu.dsc.tws.rsched.bootstrap.ZKWorkerController</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html" title="interface in edu.iu.dsc.tws.api.resource">IWorkerController</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">ZKWorkerController</span>
extends java.lang.Object
implements <a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html" title="interface in edu.iu.dsc.tws.api.resource">IWorkerController</a></pre>
<div class="block">gets unique workerID's for each client by using DistributedAtomicInteger
 gets the current list of all workers from PathChildrenCache
 it does not keep the list of worker nodes, it is already kept in PathChildrenCache
 If a worker joins after failure, it gets its previous ID
 There is no gap in id sequence.
 All worker names and IDs are kept in the job node as binary encoded WorkerInfo
 Each worker appends its WorkerInfo
 Before each WorkerInfo byte array, we put the length of the byte array as 4 bytes
 So WorkerInfo objects are decoded by using their lengths

 They append to this list in synchronized fashion by acquiring a distributed lock:
   InterProcessMutex

 we use a barrier to make all workers wait until the last worker arrives at the barrier point
 we count the number of waiting workers by using a DistributedAtomicInteger</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.logging.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#LOG">LOG</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#ZKWorkerController-edu.iu.dsc.tws.api.config.Config-java.lang.String-java.lang.String-int-NodeInfo-JobAPI.ComputeResource-">ZKWorkerController</a></span>(<a href="../../../../../../edu/iu/dsc/tws/api/config/Config.html" title="class in edu.iu.dsc.tws.api.config">Config</a>&nbsp;config,
                  java.lang.String&nbsp;jobName,
                  java.lang.String&nbsp;workerIpAndPort,
                  int&nbsp;numberOfWorkers,
                  NodeInfo&nbsp;nodeInfo,
                  JobAPI.ComputeResource&nbsp;computeResource)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#close--">close</a></span>()</code>
<div class="block">close the children cache
 close persistent node for this worker
 close the connection

 if this is the last worker to complete, delete all relevant znode for this job</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;WorkerInfo&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#getAllWorkers--">getAllWorkers</a></span>()</code>
<div class="block">wait to make sure that the number of workers reached the total number of workers in the job
 return all joined workers in the job including the ones that have already left
 return null if the timeLimit is reached or en exception is thrown while waiting</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.util.List&lt;WorkerInfo&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#getCurrentWorkers--">getCurrentWorkers</a></span>()</code>
<div class="block">Get current list of workers from local children cache
 This list does not have the workers that have already left</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.util.List&lt;WorkerInfo&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#getJoinedWorkers--">getJoinedWorkers</a></span>()</code>
<div class="block">Get all joined workers including the ones that have already completed and left</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#getNumberOfCurrentWorkers--">getNumberOfCurrentWorkers</a></span>()</code>
<div class="block">get number of current workers in the job as seen from this worker</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#getNumberOfWorkers--">getNumberOfWorkers</a></span>()</code>
<div class="block">return the number of all workers in this job,
 including non-started ones and finished ones</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>WorkerInfo</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#getWorkerInfo--">getWorkerInfo</a></span>()</code>
<div class="block">return the WorkerInfo object for this worker</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>WorkerInfo</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#getWorkerInfoForID-int-">getWorkerInfoForID</a></span>(int&nbsp;id)</code>
<div class="block">return the WorkerInfo object for the given ID</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#initialize--">initialize</a></span>()</code>
<div class="block">connect to the server
 get a workerID for this worker
 append this worker info to the body of job znode
 create an ephemeral znode for this client</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#initialize-int-">initialize</a></span>(int&nbsp;workerID)</code>
<div class="block">connect to the server
 get a workerID for this worker
 append this worker info to the body of job znode
 create an ephemeral znode for this client</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#printWorkers-java.util.List-">printWorkers</a></span>(java.util.List&lt;WorkerInfo&gt;&nbsp;workers)</code>
<div class="block">Print all given workers</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html#waitOnBarrier--">waitOnBarrier</a></span>()</code>
<div class="block">we use a DistributedAtomicInteger to count the number of workers
 that have reached to the barrier point

 Last worker to call this method and to increase the DistributedAtomicInteger,
 removes the barrier and lets all previous waiting workers be released

 other workers to call this method and to increase the DistributedAtomicInteger,
 enables the barrier by calling setBarrier method and wait

 it is enough to call setBarrier method by only the first worker,
 however, it does not harm calling by many workers

 if we let only the first worker to set the barrier with setBarrier method,
 then, the second worker may call this method after the dai is increased
 but before the setBarrier method is called.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.edu.iu.dsc.tws.api.resource.IWorkerController">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;edu.iu.dsc.tws.api.resource.<a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html" title="interface in edu.iu.dsc.tws.api.resource">IWorkerController</a></h3>
<code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getCheckpointingClient--">getCheckpointingClient</a>, <a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getFailureListener--">getFailureListener</a>, <a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getRuntimeObject-java.lang.String-">getRuntimeObject</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LOG</h4>
<pre>public static final&nbsp;java.util.logging.Logger LOG</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ZKWorkerController-edu.iu.dsc.tws.api.config.Config-java.lang.String-java.lang.String-int-NodeInfo-JobAPI.ComputeResource-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ZKWorkerController</h4>
<pre>public&nbsp;ZKWorkerController(<a href="../../../../../../edu/iu/dsc/tws/api/config/Config.html" title="class in edu.iu.dsc.tws.api.config">Config</a>&nbsp;config,
                          java.lang.String&nbsp;jobName,
                          java.lang.String&nbsp;workerIpAndPort,
                          int&nbsp;numberOfWorkers,
                          NodeInfo&nbsp;nodeInfo,
                          JobAPI.ComputeResource&nbsp;computeResource)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initialize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>public&nbsp;boolean&nbsp;initialize()</pre>
<div class="block">connect to the server
 get a workerID for this worker
 append this worker info to the body of job znode
 create an ephemeral znode for this client</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="initialize-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>public&nbsp;boolean&nbsp;initialize(int&nbsp;workerID)</pre>
<div class="block">connect to the server
 get a workerID for this worker
 append this worker info to the body of job znode
 create an ephemeral znode for this client</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="getWorkerInfo--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWorkerInfo</h4>
<pre>public&nbsp;WorkerInfo&nbsp;getWorkerInfo()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getWorkerInfo--">IWorkerController</a></code></span></div>
<div class="block">return the WorkerInfo object for this worker</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getWorkerInfo--">getWorkerInfo</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html" title="interface in edu.iu.dsc.tws.api.resource">IWorkerController</a></code></dd>
</dl>
</li>
</ul>
<a name="getWorkerInfoForID-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWorkerInfoForID</h4>
<pre>public&nbsp;WorkerInfo&nbsp;getWorkerInfoForID(int&nbsp;id)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getWorkerInfoForID-int-">IWorkerController</a></code></span></div>
<div class="block">return the WorkerInfo object for the given ID</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getWorkerInfoForID-int-">getWorkerInfoForID</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html" title="interface in edu.iu.dsc.tws.api.resource">IWorkerController</a></code></dd>
</dl>
</li>
</ul>
<a name="getNumberOfWorkers--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfWorkers</h4>
<pre>public&nbsp;int&nbsp;getNumberOfWorkers()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getNumberOfWorkers--">IWorkerController</a></code></span></div>
<div class="block">return the number of all workers in this job,
 including non-started ones and finished ones</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getNumberOfWorkers--">getNumberOfWorkers</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html" title="interface in edu.iu.dsc.tws.api.resource">IWorkerController</a></code></dd>
</dl>
</li>
</ul>
<a name="printWorkers-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>printWorkers</h4>
<pre>public&nbsp;void&nbsp;printWorkers(java.util.List&lt;WorkerInfo&gt;&nbsp;workers)</pre>
<div class="block">Print all given workers</div>
</li>
</ul>
<a name="getCurrentWorkers--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentWorkers</h4>
<pre>public&nbsp;java.util.List&lt;WorkerInfo&gt;&nbsp;getCurrentWorkers()</pre>
<div class="block">Get current list of workers from local children cache
 This list does not have the workers that have already left</div>
</li>
</ul>
<a name="getNumberOfCurrentWorkers--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfCurrentWorkers</h4>
<pre>public&nbsp;int&nbsp;getNumberOfCurrentWorkers()</pre>
<div class="block">get number of current workers in the job as seen from this worker</div>
</li>
</ul>
<a name="getJoinedWorkers--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJoinedWorkers</h4>
<pre>public&nbsp;java.util.List&lt;WorkerInfo&gt;&nbsp;getJoinedWorkers()</pre>
<div class="block">Get all joined workers including the ones that have already completed and left</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getJoinedWorkers--">getJoinedWorkers</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html" title="interface in edu.iu.dsc.tws.api.resource">IWorkerController</a></code></dd>
</dl>
</li>
</ul>
<a name="getAllWorkers--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllWorkers</h4>
<pre>public&nbsp;java.util.List&lt;WorkerInfo&gt;&nbsp;getAllWorkers()
                                         throws <a href="../../../../../../edu/iu/dsc/tws/api/exceptions/TimeoutException.html" title="class in edu.iu.dsc.tws.api.exceptions">TimeoutException</a></pre>
<div class="block">wait to make sure that the number of workers reached the total number of workers in the job
 return all joined workers in the job including the ones that have already left
 return null if the timeLimit is reached or en exception is thrown while waiting</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#getAllWorkers--">getAllWorkers</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html" title="interface in edu.iu.dsc.tws.api.resource">IWorkerController</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../edu/iu/dsc/tws/api/exceptions/TimeoutException.html" title="class in edu.iu.dsc.tws.api.exceptions">TimeoutException</a></code></dd>
</dl>
</li>
</ul>
<a name="waitOnBarrier--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitOnBarrier</h4>
<pre>public&nbsp;void&nbsp;waitOnBarrier()
                   throws <a href="../../../../../../edu/iu/dsc/tws/api/exceptions/TimeoutException.html" title="class in edu.iu.dsc.tws.api.exceptions">TimeoutException</a></pre>
<div class="block">we use a DistributedAtomicInteger to count the number of workers
 that have reached to the barrier point

 Last worker to call this method and to increase the DistributedAtomicInteger,
 removes the barrier and lets all previous waiting workers be released

 other workers to call this method and to increase the DistributedAtomicInteger,
 enables the barrier by calling setBarrier method and wait

 it is enough to call setBarrier method by only the first worker,
 however, it does not harm calling by many workers

 if we let only the first worker to set the barrier with setBarrier method,
 then, the second worker may call this method after the dai is increased
 but before the setBarrier method is called. To prevent this,
 we may need to use a distributed InterProcessMutex.
 So, instead of using a distributed InterProcessMutex, we call this method many times

 DistributedAtomicInteger always increases.
 We check whether it is a multiple of numberOfWorkers in a job
 If so, all workers have reached the barrier

 this method may be called many times during a computation

 return true if all workers have reached the barrier and they are all released
 if timeout is reached, return false</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html#waitOnBarrier--">waitOnBarrier</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../edu/iu/dsc/tws/api/resource/IWorkerController.html" title="interface in edu.iu.dsc.tws.api.resource">IWorkerController</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../edu/iu/dsc/tws/api/exceptions/TimeoutException.html" title="class in edu.iu.dsc.tws.api.exceptions">TimeoutException</a></code></dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">close the children cache
 close persistent node for this worker
 close the connection

 if this is the last worker to complete, delete all relevant znode for this job</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../edu/iu/dsc/tws/rsched/bootstrap/ZKUtil.html" title="class in edu.iu.dsc.tws.rsched.bootstrap"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?edu/iu/dsc/tws/rsched/bootstrap/ZKWorkerController.html" target="_top">Frames</a></li>
<li><a href="ZKWorkerController.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
