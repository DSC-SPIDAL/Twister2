<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>KeyedReceiver</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="KeyedReceiver";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedDataSerializer.html" title="class in edu.iu.dsc.tws.comms.dfw.io"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedSerializerLargeTest.html" title="class in edu.iu.dsc.tws.comms.dfw.io"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html" target="_top">Frames</a></li>
<li><a href="KeyedReceiver.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">edu.iu.dsc.tws.comms.dfw.io</div>
<h2 title="Class KeyedReceiver" class="title">Class KeyedReceiver</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>edu.iu.dsc.tws.comms.dfw.io.KeyedReceiver</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html" title="interface in edu.iu.dsc.tws.api.comms.messaging">MessageReceiver</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/gather/keyed/DKGatherBatchFinalReceiver.html" title="class in edu.iu.dsc.tws.comms.dfw.io.gather.keyed">DKGatherBatchFinalReceiver</a>, <a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/gather/keyed/KGatherBatchPartialReceiver.html" title="class in edu.iu.dsc.tws.comms.dfw.io.gather.keyed">KGatherBatchPartialReceiver</a>, <a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/gather/keyed/KGatherStreamingReceiver.html" title="class in edu.iu.dsc.tws.comms.dfw.io.gather.keyed">KGatherStreamingReceiver</a>, <a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/reduce/keyed/KReduceBatchReceiver.html" title="class in edu.iu.dsc.tws.comms.dfw.io.reduce.keyed">KReduceBatchReceiver</a>, <a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/reduce/keyed/KReduceStreamingReceiver.html" title="class in edu.iu.dsc.tws.comms.dfw.io.reduce.keyed">KReduceStreamingReceiver</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">KeyedReceiver</span>
extends java.lang.Object
implements <a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html" title="interface in edu.iu.dsc.tws.api.comms.messaging">MessageReceiver</a></pre>
<div class="block">This class is the abstract class that all keyed receivers extend. This provides all the basic
 data structures and performs initialisation on those data structures.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Map&lt;java.lang.Integer,java.lang.Boolean&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#batchDone">batchDone</a></span></code>
<div class="block">Tracks if the partial receiver has completed processing for a given target</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../edu/iu/dsc/tws/api/comms/DataFlowOperation.html" title="interface in edu.iu.dsc.tws.api.comms">DataFlowOperation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#dataFlowOperation">dataFlowOperation</a></span></code>
<div class="block">The dataflow operation that is related to the class instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#destination">destination</a></span></code>
<div class="block">The destination identifier that defines the next destination for this receiver</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#executor">executor</a></span></code>
<div class="block">Id of the current executor</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Map&lt;java.lang.Integer,java.util.Map&lt;java.lang.Integer,java.lang.Boolean&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#finishedSources">finishedSources</a></span></code>
<div class="block">Map that keeps track of which sources have sent an finished signal.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.Map&lt;java.lang.Integer,java.lang.Boolean&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#isEmptySent">isEmptySent</a></span></code>
<div class="block">Tracks if the empty message has been sent for each target</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#isFinalBatchReceiver">isFinalBatchReceiver</a></span></code>
<div class="block">Indicates whether the receiver instance is a final batch receiver or not.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#keyLimit">keyLimit</a></span></code>
<div class="block">The number of keys buffered in this receiver before keys are flushed</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#limitPerKey">limitPerKey</a></span></code>
<div class="block">The buffer limit for single key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.Map&lt;java.lang.Integer,java.util.Map&lt;java.lang.Object,java.util.Queue&lt;java.lang.Object&gt;&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#messages">messages</a></span></code>
<div class="block">Map that keeps all the incoming messages to this receiver.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#representSource">representSource</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#representSourceSet">representSourceSet</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Map&lt;java.lang.Integer,java.util.Queue&lt;java.lang.Object&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#sendQueue">sendQueue</a></span></code>
<div class="block">Objects that are inserted into this queue are objects that can be sent out from the receiver
 the progress method removes items from this queue and sends them.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.Set&lt;java.lang.Integer&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#thisSources">thisSources</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#KeyedReceiver--">KeyedReceiver</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#checkIfEmptyIsSent-int-">checkIfEmptyIsSent</a></span>(int&nbsp;target)</code>
<div class="block">checks if the Empty message was sent for this target and sends it if not sent and possible to
 send</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#finishProgress-boolean-int-">finishProgress</a></span>(boolean&nbsp;needsFurtherProgress,
              int&nbsp;target)</code>
<div class="block">Performs the final steps of the progress method in the receiver.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#init-edu.iu.dsc.tws.api.config.Config-edu.iu.dsc.tws.api.comms.DataFlowOperation-java.util.Map-">init</a></span>(<a href="../../../../../../../edu/iu/dsc/tws/api/config/Config.html" title="class in edu.iu.dsc.tws.api.config">Config</a>&nbsp;cfg,
    <a href="../../../../../../../edu/iu/dsc/tws/api/comms/DataFlowOperation.html" title="interface in edu.iu.dsc.tws.api.comms">DataFlowOperation</a>&nbsp;op,
    java.util.Map&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;expectedIds)</code>
<div class="block">Initialize the message receiver with tasks from which messages are expected
 For each sub edge in graph, for each path, gives the expected task ids</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#isAllQueuesEmpty-java.util.Queue-">isAllQueuesEmpty</a></span>(java.util.Queue&lt;java.lang.Object&gt;&nbsp;targetSendQueue)</code>
<div class="block">checks if the queue structures used to send data is empty.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#isComplete--">isComplete</a></span>()</code>
<div class="block">Weather we are complete a set of messages</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#isSourcesFinished-int-">isSourcesFinished</a></span>(int&nbsp;target)</code>
<div class="block">checks if the sources have finished for a given target.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#moveMessagesToSendQueue-int-java.util.Map-">moveMessagesToSendQueue</a></span>(int&nbsp;target,
                       java.util.Map&lt;java.lang.Object,java.util.Queue&lt;java.lang.Object&gt;&gt;&nbsp;messagesPerTarget)</code>
<div class="block">moves all the buffered messages into the sendQueue for the given target</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#moveMessageToSendQueue-int-java.util.Map-java.lang.Object-">moveMessageToSendQueue</a></span>(int&nbsp;target,
                      java.util.Map&lt;java.lang.Object,java.util.Queue&lt;java.lang.Object&gt;&gt;&nbsp;messagesPerTarget,
                      java.lang.Object&nbsp;key)</code>
<div class="block">Moves all the buffered messages for the given key into the sendQueue and removes the
 entry in the messages data structure if all the messages are moved</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#offerMessage-int-java.lang.Object-">offerMessage</a></span>(int&nbsp;target,
            java.lang.Object&nbsp;object)</code>
<div class="block">saves the given message (or messages if the object is a list) into the messages data structure
 if possible and rejects the message if the whole message cannot be added to the messages
 data structure.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#onFinish-int-">onFinish</a></span>(int&nbsp;source)</code>
<div class="block">Once called this method will update the finishedSources data structure so that the given
 source is marked as finished for each target that is present.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#onMessage-int-int-int-int-java.lang.Object-">onMessage</a></span>(int&nbsp;src,
         int&nbsp;path,
         int&nbsp;target,
         int&nbsp;flags,
         java.lang.Object&nbsp;object)</code>
<div class="block">The actual message callback</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#progress--">progress</a></span>()</code>
<div class="block">Default progress method for keyed receivers.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html#sendToTarget-boolean-boolean-int-java.util.Queue-">sendToTarget</a></span>(boolean&nbsp;needsFurtherProgress,
            boolean&nbsp;sourcesFinished,
            int&nbsp;target,
            java.util.Queue&lt;java.lang.Object&gt;&nbsp;targetSendQueue)</code>
<div class="block">Called from the progress method to perform the communication calls to send the queued messages</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.edu.iu.dsc.tws.api.comms.messaging.MessageReceiver">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;edu.iu.dsc.tws.api.comms.messaging.<a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html" title="interface in edu.iu.dsc.tws.api.comms.messaging">MessageReceiver</a></h3>
<code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html#clean--">clean</a>, <a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html#close--">close</a>, <a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html#onMessage-int-int-int-int-int-java.lang.Object-">onMessage</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="executor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>executor</h4>
<pre>protected&nbsp;int executor</pre>
<div class="block">Id of the current executor</div>
</li>
</ul>
<a name="limitPerKey">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>limitPerKey</h4>
<pre>protected&nbsp;int limitPerKey</pre>
<div class="block">The buffer limit for single key. Messages are not buffered for a key after this limit is
 reached. The limit per key is not strictly enforced and the structure may store several more
 values past this limit for some edge cases.</div>
</li>
</ul>
<a name="keyLimit">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keyLimit</h4>
<pre>protected&nbsp;int keyLimit</pre>
<div class="block">The number of keys buffered in this receiver before keys are flushed</div>
</li>
</ul>
<a name="dataFlowOperation">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataFlowOperation</h4>
<pre>protected&nbsp;<a href="../../../../../../../edu/iu/dsc/tws/api/comms/DataFlowOperation.html" title="interface in edu.iu.dsc.tws.api.comms">DataFlowOperation</a> dataFlowOperation</pre>
<div class="block">The dataflow operation that is related to the class instance. Ex - Reduce, Gather, etc.</div>
</li>
</ul>
<a name="destination">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destination</h4>
<pre>protected&nbsp;int destination</pre>
<div class="block">The destination identifier that defines the next destination for this receiver</div>
</li>
</ul>
<a name="finishedSources">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finishedSources</h4>
<pre>protected&nbsp;java.util.Map&lt;java.lang.Integer,java.util.Map&lt;java.lang.Integer,java.lang.Boolean&gt;&gt; finishedSources</pre>
<div class="block">Map that keeps track of which sources have sent an finished signal. The finish signal may
 either be a SYNC_EMPTY message or a SYNC_MESSAGE message in the message flags.
 Structure - &lt;target, &lt;source, true/false&gt;&gt;</div>
</li>
</ul>
<a name="messages">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>messages</h4>
<pre>protected&nbsp;java.util.Map&lt;java.lang.Integer,java.util.Map&lt;java.lang.Object,java.util.Queue&lt;java.lang.Object&gt;&gt;&gt; messages</pre>
<div class="block">Map that keeps all the incoming messages to this receiver. A separate map is kept for each
 target and witin each target values are mapped according to their key value
 Structure - &lt;target, &lt;key, List&lt;value&gt;&gt;&gt;</div>
</li>
</ul>
<a name="sendQueue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendQueue</h4>
<pre>protected&nbsp;java.util.Map&lt;java.lang.Integer,java.util.Queue&lt;java.lang.Object&gt;&gt; sendQueue</pre>
<div class="block">Objects that are inserted into this queue are objects that can be sent out from the receiver
 the progress method removes items from this queue and sends them. The onMessage method inserts
 objects into this queue</div>
</li>
</ul>
<a name="batchDone">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>batchDone</h4>
<pre>protected&nbsp;java.util.Map&lt;java.lang.Integer,java.lang.Boolean&gt; batchDone</pre>
<div class="block">Tracks if the partial receiver has completed processing for a given target</div>
</li>
</ul>
<a name="isEmptySent">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEmptySent</h4>
<pre>protected&nbsp;java.util.Map&lt;java.lang.Integer,java.lang.Boolean&gt; isEmptySent</pre>
<div class="block">Tracks if the empty message has been sent for each target</div>
</li>
</ul>
<a name="isFinalBatchReceiver">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFinalBatchReceiver</h4>
<pre>protected&nbsp;boolean isFinalBatchReceiver</pre>
<div class="block">Indicates whether the receiver instance is a final batch receiver or not. The value is set to
 false by default. If the receiver is a final batch receiver the sendQueue data structure
 is not used the data is always kept in the messages data structure for efficiency</div>
</li>
</ul>
<a name="representSource">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>representSource</h4>
<pre>protected&nbsp;int representSource</pre>
</li>
</ul>
<a name="thisSources">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>thisSources</h4>
<pre>protected&nbsp;java.util.Set&lt;java.lang.Integer&gt; thisSources</pre>
</li>
</ul>
<a name="representSourceSet">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>representSourceSet</h4>
<pre>protected&nbsp;boolean representSourceSet</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="KeyedReceiver--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>KeyedReceiver</h4>
<pre>public&nbsp;KeyedReceiver()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="init-edu.iu.dsc.tws.api.config.Config-edu.iu.dsc.tws.api.comms.DataFlowOperation-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;void&nbsp;init(<a href="../../../../../../../edu/iu/dsc/tws/api/config/Config.html" title="class in edu.iu.dsc.tws.api.config">Config</a>&nbsp;cfg,
                 <a href="../../../../../../../edu/iu/dsc/tws/api/comms/DataFlowOperation.html" title="interface in edu.iu.dsc.tws.api.comms">DataFlowOperation</a>&nbsp;op,
                 java.util.Map&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;expectedIds)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html#init-edu.iu.dsc.tws.api.config.Config-edu.iu.dsc.tws.api.comms.DataFlowOperation-java.util.Map-">MessageReceiver</a></code></span></div>
<div class="block">Initialize the message receiver with tasks from which messages are expected
 For each sub edge in graph, for each path, gives the expected task ids
 <p>
 target -&gt; source tasks</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html#init-edu.iu.dsc.tws.api.config.Config-edu.iu.dsc.tws.api.comms.DataFlowOperation-java.util.Map-">init</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html" title="interface in edu.iu.dsc.tws.api.comms.messaging">MessageReceiver</a></code></dd>
<dd><code>expectedIds</code> - expected task ids</dd>
</dl>
</li>
</ul>
<a name="onMessage-int-int-int-int-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onMessage</h4>
<pre>public&nbsp;boolean&nbsp;onMessage(int&nbsp;src,
                         int&nbsp;path,
                         int&nbsp;target,
                         int&nbsp;flags,
                         java.lang.Object&nbsp;object)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html#onMessage-int-int-int-int-java.lang.Object-">MessageReceiver</a></code></span></div>
<div class="block">The actual message callback</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html#onMessage-int-int-int-int-java.lang.Object-">onMessage</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html" title="interface in edu.iu.dsc.tws.api.comms.messaging">MessageReceiver</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>src</code> - the source task</dd>
<dd><code>path</code> - the path that is taken by the message, that is intermediate targets</dd>
<dd><code>target</code> - the target of this receiver</dd>
<dd><code>flags</code> - the communication flags</dd>
<dd><code>object</code> - the actual message</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the message is accepted</dd>
</dl>
</li>
</ul>
<a name="offerMessage-int-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>offerMessage</h4>
<pre>protected&nbsp;boolean&nbsp;offerMessage(int&nbsp;target,
                               java.lang.Object&nbsp;object)</pre>
<div class="block">saves the given message (or messages if the object is a list) into the messages data structure
 if possible and rejects the message if the whole message cannot be added to the messages
 data structure.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>target</code> - target for which the messages are to be added</dd>
<dd><code>object</code> - the message/messages to be added</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the message was added or false otherwise</dd>
</dl>
</li>
</ul>
<a name="onFinish-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onFinish</h4>
<pre>public&nbsp;void&nbsp;onFinish(int&nbsp;source)</pre>
<div class="block">Once called this method will update the finishedSources data structure so that the given
 source is marked as finished for each target that is present.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>source</code> - the task id of the source that has finished</dd>
</dl>
</li>
</ul>
<a name="moveMessagesToSendQueue-int-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveMessagesToSendQueue</h4>
<pre>protected&nbsp;boolean&nbsp;moveMessagesToSendQueue(int&nbsp;target,
                                          java.util.Map&lt;java.lang.Object,java.util.Queue&lt;java.lang.Object&gt;&gt;&nbsp;messagesPerTarget)</pre>
<div class="block">moves all the buffered messages into the sendQueue for the given target</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>target</code> - target for which the move needs to be done</dd>
<dd><code>messagesPerTarget</code> - messages for given target</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the messagesPerTarget is not empty at the end of the moving process or false
 otherwise</dd>
</dl>
</li>
</ul>
<a name="moveMessageToSendQueue-int-java.util.Map-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveMessageToSendQueue</h4>
<pre>protected&nbsp;boolean&nbsp;moveMessageToSendQueue(int&nbsp;target,
                                         java.util.Map&lt;java.lang.Object,java.util.Queue&lt;java.lang.Object&gt;&gt;&nbsp;messagesPerTarget,
                                         java.lang.Object&nbsp;key)</pre>
<div class="block">Moves all the buffered messages for the given key into the sendQueue and removes the
 entry in the messages data structure if all the messages are moved</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>target</code> - target for which the move needs to be done</dd>
<dd><code>messagesPerTarget</code> - messages for given target</dd>
<dd><code>key</code> - the key to be moved</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if all the messages for that key are moved successfully</dd>
</dl>
</li>
</ul>
<a name="isSourcesFinished-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSourcesFinished</h4>
<pre>protected&nbsp;boolean&nbsp;isSourcesFinished(int&nbsp;target)</pre>
<div class="block">checks if the sources have finished for a given target.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>target</code> - the target to be checked</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if all the sources for the given target are finished or false otherwise</dd>
</dl>
</li>
</ul>
<a name="checkIfEmptyIsSent-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkIfEmptyIsSent</h4>
<pre>protected&nbsp;boolean&nbsp;checkIfEmptyIsSent(int&nbsp;target)</pre>
<div class="block">checks if the Empty message was sent for this target and sends it if not sent and possible to
 send</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>target</code> - target for which the check is done</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>false if Empty is sent</dd>
</dl>
</li>
</ul>
<a name="progress--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>progress</h4>
<pre>public&nbsp;boolean&nbsp;progress()</pre>
<div class="block">Default progress method for keyed receivers. This method is targeted at partial receivers
 which typically execute the same logic. For custom progress logic this method needs to be
 overwritten</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html#progress--">progress</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html" title="interface in edu.iu.dsc.tws.api.comms.messaging">MessageReceiver</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if needs further communicationProgress</dd>
</dl>
</li>
</ul>
<a name="isComplete--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isComplete</h4>
<pre>public&nbsp;boolean&nbsp;isComplete()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html#isComplete--">MessageReceiver</a></code></span></div>
<div class="block">Weather we are complete a set of messages</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html#isComplete--">isComplete</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../edu/iu/dsc/tws/api/comms/messaging/MessageReceiver.html" title="interface in edu.iu.dsc.tws.api.comms.messaging">MessageReceiver</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if a round is complete with syncs</dd>
</dl>
</li>
</ul>
<a name="finishProgress-boolean-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finishProgress</h4>
<pre>protected&nbsp;boolean&nbsp;finishProgress(boolean&nbsp;needsFurtherProgress,
                                 int&nbsp;target)</pre>
<div class="block">Performs the final steps of the progress method in the receiver. If the method of finishing
 needs to be changed this method needs to be overwritten.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>needsFurtherProgress</code> - current state of needsFurtherProgress value</dd>
<dd><code>target</code> - the target(which is a source in this instance) from which the messages are sent</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if further progress is needed or false otherwise</dd>
</dl>
</li>
</ul>
<a name="isAllQueuesEmpty-java.util.Queue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAllQueuesEmpty</h4>
<pre>protected&nbsp;boolean&nbsp;isAllQueuesEmpty(java.util.Queue&lt;java.lang.Object&gt;&nbsp;targetSendQueue)</pre>
<div class="block">checks if the queue structures used to send data is empty. If Additional data structures are
 used this method needs to be overwritten to include them</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>targetSendQueue</code> - message queue for the current target</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if all the related queues and structures are empty</dd>
</dl>
</li>
</ul>
<a name="sendToTarget-boolean-boolean-int-java.util.Queue-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sendToTarget</h4>
<pre>protected&nbsp;boolean&nbsp;sendToTarget(boolean&nbsp;needsFurtherProgress,
                               boolean&nbsp;sourcesFinished,
                               int&nbsp;target,
                               java.util.Queue&lt;java.lang.Object&gt;&nbsp;targetSendQueue)</pre>
<div class="block">Called from the progress method to perform the communication calls to send the queued messages</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>needsFurtherProgress</code> - current state of needsFurtherProgress value</dd>
<dd><code>sourcesFinished</code> - specifies if the sources have completed</dd>
<dd><code>target</code> - the target(which is a source in this instance) from which the messages are sent</dd>
<dd><code>targetSendQueue</code> - the data structure that contains all the message data</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if further progress is needed or false otherwise</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedDataSerializer.html" title="class in edu.iu.dsc.tws.comms.dfw.io"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../edu/iu/dsc/tws/comms/dfw/io/KeyedSerializerLargeTest.html" title="class in edu.iu.dsc.tws.comms.dfw.io"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?edu/iu/dsc/tws/comms/dfw/io/KeyedReceiver.html" target="_top">Frames</a></li>
<li><a href="KeyedReceiver.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
