<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>TSet Persisting · Twister2</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## About this example"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="TSet Persisting · Twister2"/><meta property="og:type" content="website"/><meta property="og:url" content="https://twister2.org/"/><meta property="og:description" content="## About this example"/><meta property="og:image" content="https://twister2.org/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://twister2.org/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://twister2.org/blog/atom.xml" title="Twister2 Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://twister2.org/blog/feed.xml" title="Twister2 Blog RSS Feed"/><link rel="stylesheet" href="/css/code-blocks-buttons.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Oswald|Roboto&amp;display=swap"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-blocks-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo_large.png" alt="Twister2"/><h2 class="headerTitleWithLogo">Twister2</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/introduction" target="_self">Getting Started</a></li><li class=""><a href="/docs/compiling/compile_overview" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/docs/examples/tset/hello_world" target="_self">Tutorial</a></li><li class=""><a href="/docs/ai/artificial_intelligence" target="_self">AI</a></li><li class=""><a href="/docs/examples/examples" target="_self">Examples</a></li><li class=""><a href="/docs/developers/debugging" target="_self">Contribute</a></li><li class=""><a href="/docs/download" target="_self">Download</a></li><li class=""><a href="/configs" target="_self">Configurations</a></li><li class=""><a href="/javadocs/index.html" target="_self">Java Docs</a></li><li class=""><a href="https://github.com/DSC-SPIDAL/twister2" target="_blank">GitHub</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Tutorial</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Tutorial</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/examples/tset/hello_world">Hello Twister2</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/tset/tset_source">TSet Source</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/tset/tset_compute">TSet Compute</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/tset/tset_communication">TSet Communication</a></li><li class="navListItem"><a class="navItem" href="/docs/examples/tset/tset_caching">TSet Caching</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/examples/tset/tset_persisting">TSet Persisting / Checkpointing</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">TSet Persisting</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="about-this-example"></a><a href="#about-this-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>About this example</h2>
<p>Everything we discussed so far happens on memory. When our data doesn't fit into the memory, persist() command can be used to offload data into the local disk. This makes all previous residuals garbage collectible and helps to free up memory for the upcoming computations.</p>
<h2><a class="anchor" aria-hidden="true" id="tset-persist-operation"></a><a href="#tset-persist-operation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TSet Persist Operation</h2>
<p>Other than giving the ability to use disk, persist() command serves another purpose when it comes to fault tolerence. If you run twister2 with fault tolerence enabled, when persist() command is executed, twister2 internally creates a checkpoint and on failure, you can restart the same job from the last persist()ed point.</p>
<p>Similar to catch()ed TSets, persist()ed TSets can also be added as inputs for subsequent computations.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-45-tab-46" class="nav-link active" data-group="group_45" data-tab="tab-group-45-content-46">Java</div><div id="tab-group-45-tab-47" class="nav-link" data-group="group_45" data-tab="tab-group-45-content-47">Python</div></div><div class="tab-content"><div id="tab-group-45-content-46" class="tab-pane active" data-group="group_45" tabindex="-1"><div><span><pre><code class="hljs css language-java">SourceTSet&lt;Integer&gt; sourceX = env.createSource(<span class="hljs-keyword">new</span> SourceFunc&lt;Integer&gt;() {<br /><br />      <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br /><br />      <span class="hljs-meta">@Override</span><br />      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">hasNext</span><span class="hljs-params">()</span> </span>{<br />        <span class="hljs-keyword">return</span> count &lt; <span class="hljs-number">1000000</span>;<br />      }<br /><br />      <span class="hljs-meta">@Override</span><br />      <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">next</span><span class="hljs-params">()</span> </span>{<br />        <span class="hljs-keyword">return</span> count++;<br />      }<br />    }, <span class="hljs-number">4</span>);<br /><br />    <span class="hljs-keyword">long</span> t1 = System.currentTimeMillis();<br />    ComputeTSet&lt;Object, Iterator&lt;Object&gt;&gt; twoComputes = sourceX.direct().compute((itr, c) -&gt; {<br />      itr.forEachRemaining(i -&gt; {<br />        c.collect(i * <span class="hljs-number">5</span>);<br />      });<br />    }).direct().compute((itr, c) -&gt; {<br />      itr.forEachRemaining(i -&gt; {<br />        c.collect((<span class="hljs-keyword">int</span>) i + <span class="hljs-number">2</span>);<br />      });<br />    });<br />    LOG.info(<span class="hljs-string">"Time for two computes : "</span> + (System.currentTimeMillis() - t1));<br /><br />    t1 = System.currentTimeMillis();<br />    PersistedTSet&lt;Object&gt; persist = twoComputes.persist();<br />    LOG.info(<span class="hljs-string">"TIme for cache : "</span> + (System.currentTimeMillis() - t1));<br />    <span class="hljs-comment">// When persist() is called, twister2 performs all the computations/communication</span><br />    <span class="hljs-comment">// upto this point and persists the result into the disk.</span><br />    <span class="hljs-comment">// This makes previous data garbage collectible and frees some memory.</span><br />    <span class="hljs-comment">// If persist() is called in a checkpointing enabled job, this will create</span><br />    <span class="hljs-comment">// a snapshot at this point and will start straightaway from this point if the</span><br />    <span class="hljs-comment">// job is restarted.</span><br /><br />    <span class="hljs-comment">// Similar to CachedTSets, PersistedTSets can be added as inputs for other TSets and</span><br />    <span class="hljs-comment">// operations</span><br /><br /><br />    persist.reduce((i1, i2) -&gt; {<br />      <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>) i1 + (<span class="hljs-keyword">int</span>) i2;<br />    }).forEach(i -&gt; {<br />      LOG.info(<span class="hljs-string">"SUM="</span> + i);<br />    });<br /></code></pre>
</span></div></div><div id="tab-group-45-content-47" class="tab-pane" data-group="group_45" tabindex="-1"><div><span><pre><code class="hljs css language-python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IntSource</span><span class="hljs-params">(SourceFunc)</span>:</span><br /><br />    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self)</span>:</span><br />        super().__init__()<br />        self.i = <span class="hljs-number">0</span><br /><br />    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">has_next</span><span class="hljs-params">(self)</span>:</span><br />        <span class="hljs-keyword">return</span> self.i &lt; <span class="hljs-number">10000</span><br /><br />    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">next</span><span class="hljs-params">(self)</span>:</span><br />        res = self.i<br />        self.i = self.i + <span class="hljs-number">1</span><br />        <span class="hljs-keyword">return</span> res<br /><br /><br />source_x = env.create_source(IntSource(), <span class="hljs-number">4</span>)<br /><br /><br /><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mul_by_five</span><span class="hljs-params">(itr, collector, ctx: TSetContext)</span>:</span><br />    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> itr:<br />        collector.collect(i * <span class="hljs-number">5</span>)<br /><br /><br /><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_two</span><span class="hljs-params">(itr, collector, ctx: TSetContext)</span>:</span><br />    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> itr:<br />        collector.collect(i + <span class="hljs-number">2</span>)<br /><br /><br />t1 = datetime.now()<br />two_computes = source_x.compute(mul_by_five).compute(add_two)<br />t2 = datetime.now()<br />print(<span class="hljs-string">"Time taken for two_computes %d"</span> % (t2 - t1).total_seconds())<br /><br />t1 = datetime.now()<br />persisted = two_computes.persist()<br />t2 = datetime.now()<br />print(<span class="hljs-string">"Time taken for cache %d"</span> % (t2 - t1).total_seconds())<br /><br />persisted.reduce(<span class="hljs-keyword">lambda</span> i1, i2: i1 + i2) \<br />    .for_each(<span class="hljs-keyword">lambda</span> i: print(<span class="hljs-string">"SUM = %d"</span> % i))<br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="running-this-example"></a><a href="#running-this-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running this example</h2>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-48-tab-49" class="nav-link active" data-group="group_48" data-tab="tab-group-48-content-49">Java</div><div id="tab-group-48-tab-50" class="nav-link" data-group="group_48" data-tab="tab-group-48-content-50">Python</div></div><div class="tab-content"><div id="tab-group-48-content-49" class="tab-pane active" data-group="group_48" tabindex="-1"><div><span><pre><code class="hljs css language-bash">./bin/twister2 submit standalone jar examples/libexamples-java.jar edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample<br /></code></pre>
</span></div></div><div id="tab-group-48-content-50" class="tab-pane" data-group="group_48" tabindex="-1"><div><span><pre><code class="hljs css language-bash">./bin/twister2 submit standalone python examples/python/tset_checkpointing.py<br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="output"></a><a href="#output" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output</h2>
<p>We should see 4 responses with each worker with the time taken for persisting and a response from 0th worker with the sum of all the numbers.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-51-tab-52" class="nav-link active" data-group="group_51" data-tab="tab-group-51-content-52">Java</div><div id="tab-group-51-tab-53" class="nav-link" data-group="group_51" data-tab="tab-group-51-content-53">Python</div></div><div class="tab-content"><div id="tab-group-51-content-52" class="tab-pane active" data-group="group_51" tabindex="-1"><div><span><p>Here sum could be negative due to int overflow.</p>
<pre><code class="hljs css language-bash">[2019-11-27 14:22:54 -0500] [INFO] [worker-3] [main] edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample: Time <span class="hljs-keyword">for</span> persist : 1  <br />[2019-11-27 14:22:54 -0500] [INFO] [worker-2] [main] edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample: Time <span class="hljs-keyword">for</span> persist : 1 <br />[2019-11-27 14:22:54 -0500] [INFO] [worker-1] [main] edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample: Time <span class="hljs-keyword">for</span> persist : 1  <br />[2019-11-27 14:22:54 -0500] [INFO] [worker-0] [main] edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample: Time <span class="hljs-keyword">for</span> persist : 1 <br />[2019-11-27 14:23:36 -0500] [INFO] [worker-0] [main] edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample: SUM=-1378487240<br /></code></pre>
</span></div></div><div id="tab-group-51-content-53" class="tab-pane" data-group="group_51" tabindex="-1"><div><span><pre><code class="hljs css language-bash">[2019-11-27 13:55:10 -0500] [INFO] [worker-3] [python-process] edu.iu.dsc.tws.python.PythonWorker: Time taken <span class="hljs-keyword">for</span> persist 5  <br />[2019-11-27 13:55:10 -0500] [INFO] [worker-0] [python-process] edu.iu.dsc.tws.python.PythonWorker: Time taken <span class="hljs-keyword">for</span> persist 4 <br />[2019-11-27 13:55:09 -0500] [INFO] [worker-2] [python-process] edu.iu.dsc.tws.python.PythonWorker: Time taken <span class="hljs-keyword">for</span> persist 5  <br />[2019-11-27 13:55:10 -0500] [INFO] [worker-1] [python-process] edu.iu.dsc.tws.python.PythonWorker: Time taken <span class="hljs-keyword">for</span> persist 4  <br />[2019-11-27 13:55:10 -0500] [INFO] [-] [JM] edu.iu.dsc.tws.master.server.WorkerMonitor: Worker:3 COMPLETED.  <br />SUM = 999980000<br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="checkpointing"></a><a href="#checkpointing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Checkpointing</h2>
<p>Other than for offloading data to the disk, persis() can be used for checkpointing. When checkpointed, jobs can be restarted from the checkpoints on failures, without having to execute everything from scratch.</p>
<p>To enable checkpointing <code>twister2.checkpointing.enable</code> configuration of <code>checkpoint.yaml</code> should be switched to <code>true</code>. Other than that, following language specific changes should be applied to your code.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-54-tab-55" class="nav-link active" data-group="group_54" data-tab="tab-group-54-content-55">Java</div><div id="tab-group-54-tab-56" class="nav-link" data-group="group_54" data-tab="tab-group-54-content-56">Python</div></div><div class="tab-content"><div id="tab-group-54-content-55" class="tab-pane active" data-group="group_54" tabindex="-1"><div><span><p>Initialize checkpointing environment as the first thing in the worker execute method.</p>
<pre><code class="hljs css language-bash">public class TSetCheckptExample implements Twister2Worker, Serializable {<br />  public void execute(WorkerEnvironment workerEnvironment) {<br />    BatchChkPntEnvironment env = TSetEnvironment.initCheckpointing(workerEnvironment);<br />    ...<br />  }<br />}<br /></code></pre>
</span></div></div><div id="tab-group-54-content-56" class="tab-pane" data-group="group_54" tabindex="-1"><div><span><p>There is nothing to be changed. Checkpointing will get automatically enabled when <code>checkpoint.yaml</code> is changed</p>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="restarting-a-checkpointed-job"></a><a href="#restarting-a-checkpointed-job" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Restarting a checkpointed job</h2>
<p>Every twister2 job has an ID. The ID of the twister2 job can be found in the initial set of logs.</p>
<pre><code class="hljs css language-bash"> _____           _     _           ____  
/__   \__      _(_)___| |_ ___ _ _|___ \ 
  / /\/\ \ /\ / / / __| __/ _ \ <span class="hljs-string">'__|__) |
 / /    \ V  V /| \__ \ ||  __/ |  / __/ 
 \/      \_/\_/ |_|___/\__\___|_| |_____| v0.4.0
                                         
Job Name        :       python-job-9d98a98e-779c-497a-91b9-486b50b01bc6
Job ID          :       python-job-9d98a98e-779c-497a-91b9-486b50b01bc6-a1594862-8b5e-4437-b7f3-e8cccfa9e6fc
Cluster Type    :       standalone
Runtime         :       OpenJDK 64-Bit Server VM 12.0.2+10
</span></code></pre>
<p>In above case, the job id is <code>python-job-9d98a98e-779c-497a-91b9-486b50b01bc6-a1594862-8b5e-4437-b7f3-e8cccfa9e6fc</code></p>
<p>A checkpointed job can be restarted by proving the job id to the <code>restart</code> command as follows.</p>
<pre><code class="hljs css language-bash">./bin/twister2 restart standalone python-job-9d98a98e-779c-497a-91b9-486b50b01bc6-a1594862-8b5e-4437-b7f3-e8cccfa9e6fc
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="output-of-restarted-job"></a><a href="#output-of-restarted-job" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output of restarted job</h2>
<p>Restarted jobs take close to 0sec for persist() operation as they are just creating a pointer to the previous results from the disk.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-57-tab-58" class="nav-link active" data-group="group_57" data-tab="tab-group-57-content-58">Java</div><div id="tab-group-57-tab-59" class="nav-link" data-group="group_57" data-tab="tab-group-57-content-59">Python</div></div><div class="tab-content"><div id="tab-group-57-content-58" class="tab-pane active" data-group="group_57" tabindex="-1"><div><span><pre><code class="hljs css language-bash">[2019-11-27 14:25:41 -0500] [INFO] [worker-0] [main] edu.iu.dsc.tws.executor.core.ExecutionPlanBuilder: Tasks will start with version 0  <br />[2019-11-27 14:25:41 -0500] [INFO] [worker-2] [main] edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample: Time <span class="hljs-keyword">for</span> persist : 0  <br />[2019-11-27 14:25:41 -0500] [INFO] [worker-3] [main] edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample: Time <span class="hljs-keyword">for</span> persist : 0  <br />[2019-11-27 14:25:41 -0500] [INFO] [worker-1] [main] edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample: Time <span class="hljs-keyword">for</span> persist : 0  <br />[2019-11-27 14:25:41 -0500] [INFO] [worker-0] [main] edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample: Time <span class="hljs-keyword">for</span> persist : 0 <br />...<br />[2019-11-27 14:26:26 -0500] [INFO] [worker-0] [main] edu.iu.dsc.tws.examples.tset.tutorial.intermediate.checkpoint.TSetCheckptExample: SUM=-1378487240 <br /></code></pre>
</span></div></div><div id="tab-group-57-content-59" class="tab-pane" data-group="group_57" tabindex="-1"><div><span><pre><code class="hljs css language-bash">[2019-11-27 13:55:10 -0500] [INFO] [worker-3] [python-process] edu.iu.dsc.tws.python.PythonWorker: Time taken <span class="hljs-keyword">for</span> persist 0  <br />[2019-11-27 13:55:10 -0500] [INFO] [worker-0] [python-process] edu.iu.dsc.tws.python.PythonWorker: Time taken <span class="hljs-keyword">for</span> persist 0 <br />[2019-11-27 13:55:09 -0500] [INFO] [worker-2] [python-process] edu.iu.dsc.tws.python.PythonWorker: Time taken <span class="hljs-keyword">for</span> persist 0  <br />[2019-11-27 13:55:10 -0500] [INFO] [worker-1] [python-process] edu.iu.dsc.tws.python.PythonWorker: Time taken <span class="hljs-keyword">for</span> persist 0  <br />[2019-11-27 13:55:10 -0500] [INFO] [-] [JM] edu.iu.dsc.tws.master.server.WorkerMonitor: Worker:3 COMPLETED.  <br />SUM = 999980000<br /></code></pre>
</span></div></div></div></div>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/examples/tset/tset_caching"><span class="arrow-prev">← </span><span>TSet Caching</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#about-this-example">About this example</a></li><li><a href="#tset-persist-operation">TSet Persist Operation</a></li><li><a href="#running-this-example">Running this example</a></li><li><a href="#output">Output</a></li><li><a href="#checkpointing">Checkpointing</a></li><li><a href="#restarting-a-checkpointed-job">Restarting a checkpointed job</a></li><li><a href="#output-of-restarted-job">Output of restarted job</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo_large.png" alt="Twister2" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/quickstart.html">Getting Started (Quickstart)</a><a href="/docs/en/concepts/api_overview">Guides (Programming Guides)</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://dsc-twister.slack.com/">Project Chat</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/DSC-SPIDAL/twister2">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2020 Indiana University</section></footer></div></body></html>